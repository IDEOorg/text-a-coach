<div class="main-index" scroll-fix>
  <div sticky-header always-on="true"></div>

  <div class="main-conversation container footer-context">
    <div class="row align-center conversation-row expanded">
      <div class="small-10 medium-6 columns text-left">
        <div class="conversation">
          <div ng-if="vm.conversation.messages.length > 0">
            <div class="message"
              ng-repeat="message in vm.conversation.messages | orderBy: '+created_at'"
              ng-class="message.direction"
            >
              <p>
                {{message.message}}
              </p>
              <div class="person" ng-show="message.direction === 'direction_out'">
                <small><span class="all-caps">{{vm.conversation.agent.name}}</span>, {{vm.conversation.agent.job_title}}</small>
              </div>
              <div class="person" ng-show="message.direction === 'direction_in'">
                <small><span class="all-caps">{{vm.conversation.user.name}}</span> in {{vm.conversation.user.city}}</small>
              </div>
            </div>
          </div>
          <div ng-if="vm.conversation.messages.length === 0">
            <div class="message direction_in">
              <p>
                {{vm.conversation.summary_question}}
              </p>
              <div class="person">
                <small><span class="all-caps">{{vm.conversation.user.name}}</span> in {{vm.conversation.user.city}}</small>
              </div>
            </div>
            <div class="message direction_out">
              <p>
                {{vm.conversation.summary_answer}}
              </p>
              <div class="person">
                <small><span class="all-caps">{{vm.conversation.agent.name}}</span>, {{vm.conversation.agent.job_title}}</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="call-to-action expanded">
      <div class="row align-center text-center">
          <h4>
            Not what you're looking for? <br>
            Text us a money question now:
          </h4>
      </div>
      <div class="row align-center">
          <div class="show-for-medium chat-bubble" style="padding-top: 0.5em;">
            <a class="button phone-number all-caps">
              {{ $root.phoneNumberFormatted }}
            </a>
          </div>
          <div class="hide-for-medium">
            <div>
              <a class="button expanded text-center all-caps" ng-href="{{vm.smsLink}}" ng-click="vm.startConversation()">
                ASK US A MONEY QUESTION
              </a>
            </div>
          </div>
      </div>
    </div>

    <div footer></div>
  </div>
</div>
